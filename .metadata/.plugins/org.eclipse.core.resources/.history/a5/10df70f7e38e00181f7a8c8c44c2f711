<?php
    // echo dirname(__DIR__);本文件路径;
    $conf=include(__DIR__."config/dbConfig.php");//绝对路径
class Db{    
    public $conn;  //数据库连接参数
    //构造函数，连接mysql-server
    public function __construct(){
        $conf=include(__DIR__."/config.php");  //使用config/dbConfig.php中的数据库连接参数
        $host=$conf['host'];
        $user=$conf['user'];
        $password=$conf['password'];
        $db=$conf['db'];
        $conn=mysqli_connect($host,$user,$password,$db);
        if ($conn->connect_error) {
            die('Connect to mysql failed.');
        } else {
            echo ('Connect to mysql successfully.');
            $this->conn = $conn;            
            $this->conn->mysqli_query($this->conn,"set names utf8");
        }
    }
    public function login($str){
        $pp=mysqli_query($this->conn,"$str");
        $mp=[];
        while ($mm=mysqli_fetch_assoc($pp)){
                $mp[]=$mm;
        }
        return $mp;
    }
    public function find($str){
        $pp=mysqli_query($this->conn,"$str");
        $mm=mysqli_fetch_assoc($pp);
        return $mm;
    }
    public function insert($sql){
        mysqli_query($this->conn,$sql);
        $res=mysqli_affected_rows($this->conn);
        return $res;
    }//添加内容;
}
?>